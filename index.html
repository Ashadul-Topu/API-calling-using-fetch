<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calling API using fetch() </title>
</head>
<body>

    <h3>Calling API using fetch() </h3>
    
    
    <script>
        console.clear();
        //get Data by calling API using fetch()
        /*
        fetch('https://dummyjson.com/products').then((response) => response.json())
        .then((response) => console.log(response))
        .catch((error) => console.log(error))
        */ 

        //Error handling 
        /*
        fetch('https://dummyjson.com/products').then((response) => {
            if(!response.ok){
                const ErrorMessage = ` ${response.status} page not found`
                throw new Error(ErrorMessage)
            }
            return response.json()
        } )
        .then((response) => console.log(response))
        .catch((error) => console.log(error))
       */


        //set Data or add Data
        /*
        fetch('https://dummyjson.com/products/add',{
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                title: 'BMW Pencil',
                description: 'This is a description of the BMW Pencil',
                brand: "BMW",
                category: 'CAR',
            })
        }).then((response) => {
            if(!response.ok){
                const ErrorMessage = ` ${response.status} page not found`
                throw new Error(ErrorMessage)
            }
            return response.json()
        } )
        .then((response) => console.log(response))
        .catch((error) => console.log(error))
        */ 
        //update Data 




        // calling data using async function
        const makeRequest = async (url) =>{
            const response = await fetch(url)

            if(!response.ok) {
                const error = `${response.status} page not found`
                throw new Error(error)
            }

            const data = await response.json()
            return data;
        }

        const getData =() =>{
            makeRequest('https://dummyjson.com/products')
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        }
        getData();

    </script>
</body>
</html>